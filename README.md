# schenneltalk [스케넬톡]

## 소개
- Channeltalk 일정 Scheduler입니다
- `When2Meet`과 자동 연동이 되며, 일정투표 기능과 멘션 기능, 일정 리마인더 기능이 있습니다

## 사용법
### 현재 커맨드
자세한 사용법은 `commandlist.js` 를 참고해 주세요

- `!시간규칙`
    - 시간 규칙을 출력합니다. 처음 쓰시는 분들은 꼭 확인하세요!
- `!테스트`
    - 간단한 echo 테스트 커맨드입니다.
- `!투표생성 월-수:9-23 [새로운 일정 이름] @투표자1 @투표자2 @투표자3`
    - 태그가 된 사람들이 투표를 마무리할 때까지 일정 조사를 진행합니다. When2Meet 주소를 생성합니다.
- `!투표 목:11-13, 금:13-16, 일-화:12-15`
    - 현재 진행중인 일정에 투표합니다
- `!투표확정 2022-05-22 12:00@5분 30분 @추가멘션`
    - 현재 투표를 종료하고, 30분 전에 전에 투표한 사람들에 대해 리마인더 메시지를 보내줍니다.
    - 이름이 없다는 점을 제외하고 `!리마인더 생성`과 규칙이 같습니다
- `!투표삭제`
    - 현재 진행중인 일정조사를 삭제합니다.
- `!투표목록`
    - 종료되지 않은 투표목록과 현재 진행중인 투표를 보여줍니다
- `!투표전환`
    - 현재 진행중인 투표를 주어진 이름으로 전환합니다.
- `!투표해주세요`
    - 투표 생성 시 태그가 된 사람들 중 아직 투표하지 않은 사람들이 있으면 메시지를 보내줍니다.
- `!현재투표`
    - 투표를 한 사람과, 조사 링크를 보여줍니다.
- `!사용법`
    - 사용법을 호출합니다.
- `!리마인더 테스트`
    - 간단한 echo 테스트 커맨드입니다.
- `!리마인더 생성 [이름] 2022-05-22 12:23@5분 60분 1시 24시 @사용자1 @사용자2 @사용자3`
    - 리마인더를 생성합니다. 시간은 js Date 형식에 맞추어 작성하세요.
    - 기존에 이미 존재하는 경우 덮어씁니다. 미리 알림 단위는 분과 시만 사용 가능합니다.
    - 이름에 공백은 허용되지 않습니다. 미리 알림 시간이 안 정해진 경우 기본값으로 30분 전에 리마인더 됩니다.
- `!리마인더 삭제`
    - 주어진 이름의 리마인더를 삭제합니다.
- `!리마인더 알림`
    - 주어진 이름의 리마인더를 시간에 관계없이 실행합니다.
- `!리마인더 목록`
    - 현재 존재하는 리마인더 목록을 띄워줍니다.
- `!리마인더 사용법`
    - 리마인드 사용법을 호출합니다.

### 사용 스택
- Express
- Mysql
- Sequelize
- Docker

### 배포 방법
1. `.env` 파일 생성
```
PORT=8000
MYSQL_ROOT_PASSWORD=
MYSQL_DATABASE=schennel
MYSQL_HOST=schennel_mysql
CHANNEL_BOT_NAME=
CHANNEL_BOT_TOKEN=
CHANNEL_API_KEY=
CHANNEL_API_SECRET=
```

2. `docker-compose.yml` backend port 설정
3. https가 실행될 수 있는 서버 위에서 실행
- ex: Nginx + certbot 에서 리버스 프록시로 백엔드 포트와 연결
4. 채널톡의 웹훅 주소 설정
